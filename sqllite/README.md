# Сервис сокращения URL-адресов

Это REST API приложение, разработанное на Go, которое позволяет сокращать длинные URL-адреса и перенаправлять запросы по коротким алиасам.

## Функциональность

- **Сокращение URL-адресов**
  - Создание короткого алиаса для длинного URL
  - Возможность указать собственный алиас или получить случайно сгенерированный
  - Проверка на существование дубликатов URL-адресов

- **Перенаправление по алиасу**
  - Перенаправление пользователя с короткого URL на оригинальный адрес
  - Обработка ошибок при отсутствии алиаса в базе данных

## Архитектура проекта

Проект реализован с использованием чистой архитектуры:

1. **Обработчики (Handlers)** - отвечают за обработку HTTP-запросов и ответов
2. **Хранилище (Storage)** - обеспечивает взаимодействие с базой данных SQLite
3. **Middleware** - предоставляет дополнительную функциональность (логирование, ID запросов)
4. **Конфигурация (Config)** - управление настройками приложения

## Структура проекта

```
sqllite/
├── cmd/
│   └── url/
│       └── main.go         # Точка входа приложения
├── pkg/
│   ├── config/             # Конфигурация приложения
│   ├── http-server/        # HTTP-сервер и обработчики
│   │   ├── handlers/       # Обработчики запросов
│   │   │   ├── redirect/   # Обработчик перенаправления
│   │   │   └── url/        # Обработчики для URL
│   │   └── middleware/     # Middleware компоненты
│   ├── lib/                # Вспомогательные библиотеки
│   └── storage/            # Слой работы с хранилищем
│       └── sqlite/         # Реализация хранилища на SQLite
└── storage/                # Директория с файлами базы данных
```

## Использованные технологии

- **Backend**: Go 1.23+
- **Маршрутизация**: go-chi/chi
- **Работа с БД**: database/sql, mattn/go-sqlite3
- **Валидация**: go-playground/validator
- **Конфигурирование**: cleanenv
- **Логирование**: log/slog 
- **Обработка JSON**: go-chi/render

## Запуск приложения

1. Клонировать репозиторий
2. Перейти в директорию проекта: `cd sqllite`
3. Установить переменную окружения `CONFIG_PATH`, указывающую на файл конфигурации:
   ```
   export CONFIG_PATH=./config/local.yaml
   ```
4. Запустить приложение: `go run cmd/url/main.go`

По умолчанию сервер запускается на порту, указанном в конфигурации.

## API Endpoints

- **POST /url**
  - Создает новый короткий URL
  - Тело запроса: `{"url": "https://example.com", "alias": "example"}`
  - Ответ: `{"status": "OK", "alias": "example"}`

- **GET /{alias}**
  - Перенаправляет на исходный URL, связанный с алиасом
  - Ответ: HTTP-перенаправление (302 Found) 